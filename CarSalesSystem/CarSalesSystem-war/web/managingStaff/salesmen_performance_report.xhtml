<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets"
      >
<h:head>
    <title>Salesman Performance Report</title>
    <link rel="stylesheet" type="text/css" href="../css/table.css" />
    <style>
        .table-container{
            margin-top: 60px;
            padding: 60px;
        }
        .h2-class{
            margin-bottom: 30px;
            text-align: center;
        }
        #salesTable th{
            background-color: black;
            color: white;
        }
        /* Style for the container */
        .dropdown-container {
            display: flex;
            gap: 10px; /* Adds spacing between dropdowns */
            align-items: center; /* Vertically centers the dropdowns */
            margin-bottom: 30px;
        }

        /* Optional: Adjust width of dropdowns if needed */
        .form-control {
            max-width: 140px; /* Set desired width */
        }
    </style>
</h:head>
<h:body>
    <!-- Include the header -->
    <ui:include src="jsf_header.xhtml" />

    <div class="table-container">
        <h2 class="h2-class">Salesman Performance Report</h2>
        <!-- Dropdowns for Year and Month -->
        <h:form id="filterForm">
            <div class="dropdown-container">
                <!-- Year Dropdown -->
                <h:selectOneMenu value="#{SalesmanPerformanceBean.currentYear}" styleClass="form-control">
                    <f:selectItems value="#{sessionScope.availableYears}" />
                    <f:ajax listener="#{SalesmanPerformanceBean.filterData}" render="salesTable" />
                </h:selectOneMenu>

                <!-- Month Dropdown -->
                <h:selectOneMenu value="#{SalesmanPerformanceBean.currentMonthNumber}" styleClass="form-control">
                    <f:selectItems value="#{SalesmanPerformanceBean.months.entrySet()}" var="entry"
                                   itemValue="#{entry.key}" itemLabel="#{entry.value}" />
                    <f:ajax listener="#{SalesmanPerformanceBean.filterData}" render="salesTable" />
                </h:selectOneMenu>
            </div>        
        </h:form>
        
        <h:dataTable id="salesTable" value="#{SalesmanPerformanceBean.salesmenPerformanceList}" var="data"
             styleClass="table table-bordered table-hover">
            <h:column>
                <f:facet class="table-dark" name="header">Salesman ID</f:facet>
                #{data[0]} <!-- Salesman ID -->
            </h:column>
            <h:column>
                <f:facet name="header">Total Sales (RM)</f:facet>
                #{data[1]} <!-- Total Sales -->
            </h:column>
            <h:column>
                <f:facet name="header">Number of Sales (Except Cancelled)</f:facet>
                #{data[2]} <!-- Number of Sales (Except Cancelled) -->
            </h:column>
            <h:column>
                <f:facet name="header">Number of Sales (Cancelled)</f:facet>
                #{data[3]} <!-- Number of Sales (Cancelled) -->
            </h:column>
        </h:dataTable>
    </div>
</h:body>
</html>
